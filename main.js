(()=>{"use strict";const e=(e,t)=>({name:e,length:t}),t=document.getElementById("gamesboard-container"),r=document.querySelector(".options-container"),o=[e("destroyer",2),e("submarine",3),e("cruiser",3),e("battleship",4),e("carrier",5)];let n=0;const a=10,c=(e,r)=>{const o=document.createElement("div");o.classList.add("game-board"),o.style.backgroundColor=e,t.appendChild(o),o.id=r;for(let e=0;e<100;e++){const t=document.createElement("div");t.classList.add("block"),t.id=e,o.appendChild(t)}};let l;const d=(e,t,r,o)=>{let n,c=t?r<=100-o.length?r:100-o.length:r<=100-a*o.length?r:r-o.length*a+a,l=[];for(let r=0;r<o.length;r++)t?l.push(e[Number(c)+r]):l.push(e[Number(c)+r*a]);n=t?l.every(((e,t)=>l[0].id%a!=a-(l.length-(t+1)))):l.every(((e,t)=>l[0].id<a*t+1+90));const d=l.every((e=>!e.classList.contains("taken")));return{shipBlocks:l,valid:n,notTaken:d}},s=(e,t,r)=>{const o=document.querySelectorAll(`#${e} div`);let c=Math.random()<.5,i="player"===e?0===n:c,m=Math.floor(Math.random()*a*a),u=r||m;const{shipBlocks:h,valid:p,notTaken:y}=d(o,i,u,t);p&&y?h.forEach((e=>{e.classList.add(t.name),e.classList.add("taken")})):("computer"===e&&s("computer",t,r),"player"===e&&(l=!0))};let i;const m=e=>{l=!1,i=e.target},u=e=>{e.preventDefault();const t=o[i.id];p(e.target.id,t)},h=e=>{const t=e.target.id,r=o[i.id];s("player",r,t),l||i.remove()},p=(e,t)=>{const r=document.querySelectorAll("#player div");let o=0===n;const{shipBlocks:a,valid:c,notTaken:l}=d(r,o,e,t);c&&l&&a.forEach((e=>{e.classList.add("hover"),setTimeout((()=>e.classList.remove("hover")),500)}))},y=(document.getElementById("gamesboard-container"),document.querySelector(".options-container"));document.getElementById("flip-button").addEventListener("click",(()=>{const e=Array.from(r.children);n=0===n?90:0,e.forEach((e=>e.style.transform=`rotate(${n}deg)`))})),c("pink","player"),c("yellow","computer"),o.forEach((e=>s("computer",e))),Array.from(y.children).forEach((e=>e.addEventListener("dragstart",m))),document.querySelectorAll("#player div").forEach((e=>{e.addEventListener("dragover",u),e.addEventListener("drop",h)}))})();